const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CalendarView-CrPC0x4_.js","assets/calendar-BQ3AWHwQ.js","assets/vendor-CEXAHpd4.js","assets/utils-DW2mDBql.js","assets/CalendarView-CLE2Naaz.css","assets/ExportSection-CWjmp8XD.js","assets/MeetupView-LOqQscXC.js","assets/MeetupView-CtvZlrVw.css"])))=>i.map(i=>d[i]);
import{c as G,r as Ie,o as R,u as xe,a as _,b as $,e as Ee,f as N,g as L,t as q,i as U,j as F,k as le,F as Ce,l as Re,m as ne,w as ce,n as j,p as k,q as de,S as $e,s as X,v as Le,x as be,y as Pe,z as Ne}from"./vendor-CEXAHpd4.js";import{r as we,g as V,a as Be}from"./utils-DW2mDBql.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))v(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const i of d.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&v(i)}).observe(document,{childList:!0,subtree:!0});function u(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function v(l){if(l.ep)return;l.ep=!0;const d=u(l);fetch(l.href,d)}})();const _e=(e,r)=>{const u=e.__vccOpts||e;for(const[v,l]of r)u[v]=l;return u},He={};function ke(e,r){const u=Ie("router-view");return R(),G(u)}const Ue=_e(He,[["render",ke]]),Me="modulepreload",Ye=function(e){return"/kobancalendar/"+e},fe={},ee=function(r,u,v){let l=Promise.resolve();if(u&&u.length>0){let i=function(m){return Promise.all(m.map(A=>Promise.resolve(A).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const D=document.querySelector("meta[property=csp-nonce]"),c=(D==null?void 0:D.nonce)||(D==null?void 0:D.getAttribute("nonce"));l=i(u.map(m=>{if(m=Ye(m),m in fe)return;fe[m]=!0;const A=m.endsWith(".css"),h=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${h}`))return;const o=document.createElement("link");if(o.rel=A?"stylesheet":Me,A||(o.as="script"),o.crossOrigin="",o.href=m,c&&o.setAttribute("nonce",c),document.head.appendChild(o),A)return new Promise((s,n)=>{o.addEventListener("load",s),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${m}`)))})}))}function d(i){const D=new Event("vite:preloadError",{cancelable:!0});if(D.payload=i,window.dispatchEvent(D),!D.defaultPrevented)throw i}return l.then(i=>{for(const D of i||[])D.status==="rejected"&&d(D.reason);return r().catch(d)})},Fe={class:"page-layout"},Ve=["aria-pressed"],ze={key:0,class:"calendar-page-layout"},je={class:"control-section"},qe={class:"calendar-section"},Ge={class:"export-section"},Ke={key:1,class:"meetup-page-layout"},We={class:"search-controls-section"},Ze={class:"participants-section"},Je={class:"search-button-section"},Xe={key:0,class:"results-section"},Qe={key:2},et={key:0,href:"/kobancalendar/#/meetup"},tt={key:1,href:"/kobancalendar/#/"},nt={__name:"UnifiedPageLayout",props:{title:{type:String,default:""},layout:{type:String,default:"default"},showResults:{type:Boolean,default:!1}},setup(e){const r=e,u=xe(),v=_(()=>u.path==="/"||u.path===""),l=_(()=>u.path==="/meetup"),d=_(()=>r.title?r.title:r.layout==="calendar"||v.value?"KobanCalendar🚨":r.layout==="meetup"||l.value?"NominiIkundar🍻":"KobanCalendar🚨"),i=$(!1);Ee(()=>{localStorage.getItem("dark-mode")==="on"&&(document.documentElement.classList.add("dark"),i.value=!0)});function D(){i.value=!i.value,document.documentElement.classList.toggle("dark",i.value),localStorage.setItem("dark-mode",i.value?"on":"off")}return(c,m)=>(R(),N("div",Fe,[L("header",null,[L("h1",null,q(d.value),1),L("button",{class:"dark-toggle",onClick:D,"aria-pressed":i.value,"aria-label":"ダークモード切替"},q(i.value?"☀️":"🌙"),9,Ve)]),L("main",null,[e.layout==="calendar"?(R(),N("div",ze,[L("section",je,[U(c.$slots,"controls")]),L("section",qe,[U(c.$slots,"calendar")]),L("section",Ge,[U(c.$slots,"export")])])):e.layout==="meetup"?(R(),N("div",Ke,[L("section",We,[U(c.$slots,"search-controls")]),L("section",Ze,[U(c.$slots,"participants")]),L("section",Je,[U(c.$slots,"search-button")]),e.showResults?(R(),N("section",Xe,[U(c.$slots,"results")])):F("",!0)])):(R(),N("div",Qe,[U(c.$slots,"default")]))]),L("footer",null,[L("p",null,[m[0]||(m[0]=le(" KobanCalendar - ")),m[1]||(m[1]=L("a",{href:"https://github.com/bn-k1/kobancalendar?tab=readme-ov-file#kobancalendar",target:"_blank",rel:"noopener noreferrer"}," GitHub ",-1)),m[2]||(m[2]=le(" - ")),v.value?(R(),N("a",et,"🍻")):F("",!0),l.value?(R(),N("a",tt,"🚨")):F("",!0)])])]))}},at=["id"],st={class:"form-group"},ot={key:0},rt=["id","aria-label","value"],it={key:0,value:"",disabled:"",selected:""},ut=["value","disabled"],me={__name:"BaseSelector",props:{id:{type:String,default:"baseSelector"},legend:{type:String,required:!0},ariaLabel:{type:String,default:""},modelValue:{type:[String,Number,Date,Object],required:!1},options:{type:Array,default:()=>[]},displayValue:{type:String,default:""},displayAsText:{type:Boolean,default:!1},formatter:{type:Function}},emits:["update:modelValue","change"],setup(e,{emit:r}){const u=e,v=r;function l(i){return u.formatter?u.formatter(i):i===void 0?"":typeof i=="object"?i.toString?i.toString():JSON.stringify(i):String(i)}function d(i){const D=i.target.value;v("update:modelValue",D),v("change",D)}return(i,D)=>(R(),N("fieldset",{id:e.id,class:"control-group"},[L("legend",null,q(e.legend),1),L("div",st,[e.displayAsText||e.options.length===1?(R(),N("span",ot,q(e.displayValue||(e.options.length===1&&e.formatter?e.formatter(e.options[0].value||e.options[0]):l(e.options[0]))),1)):(R(),N("select",{key:1,id:e.id,"aria-label":e.ariaLabel,value:e.modelValue,onChange:d},[e.modelValue?F("",!0):(R(),N("option",it," コマ位置を選択 ")),(R(!0),N(Ce,null,Re(e.options,c=>(R(),N("option",{key:c.value||c,value:c.value||c,disabled:c.disabled},q(c.text||l(c)),9,ut))),128))],40,rt)),U(i.$slots,"default")])],8,at))}},lt=ne("calendar",()=>{const e=$(void 0),r=$(void 0),u=$([]),v=$({}),l=$(void 0),d=_(()=>l.value!==void 0);function i(h){e.value=h}function D(h){r.value=h}function c(h){u.value=h}function m(h){v.value=h}function A(h){l.value=h}return{startPosition:e,exportMonths:r,calendarEvents:u,icsExportConfig:v,eventConfig:l,isConfigLoaded:d,setStartPosition:i,setExportMonths:D,setCalendarEvents:c,setICSExportConfig:m,setEventConfig:A}}),ct=ne("schedule",()=>{const e=$({holiday:[],saturday:[],weekday:[],rotationCycleLength:0}),r=$(void 0),u=$(void 0),v=$(void 0),l=_(()=>e.value.rotationCycleLength>0);function d(m){e.value=m}function i(m){r.value=m}function D(m){u.value=m}function c(m){v.value=m}return{scheduleData:_(()=>e.value),defaultBaseDate:_(()=>r.value),activeBaseDate:_(()=>u.value),nextBaseDate:_(()=>v.value),isDataLoaded:l,setScheduleData:d,setDefaultBaseDate:i,updateActiveBaseDate:D,setNextBaseDate:c}});var dt=we();const ft=V(dt),mt=ne("holiday",()=>{const e=$({}),r=$(void 0),u=$([]);function v(i){e.value=i}function l(i){r.value=i}function d(i){u.value=i}return{allHolidays:_(()=>e.value),holidayYearsRange:_(()=>r.value),userDefinedHolidays:_(()=>u.value),setHolidays:v,setHolidayYearsRange:l,setUserDefinedHolidays:d}}),ht={DEFAULT_EXPORT_MONTHS:1,DEFAULT_SEARCH_PERIOD:30,DEFAULT_MEETUP_START_TIME:"17:00",DEFAULT_HOLIDAY_YEARS:5,DEFAULT_EXPORT_STARTDAY:16,DEFAULT_EXPORT_ENDDAY:15},ae={ISO_DATE:"YYYY-MM-DD",DISPLAY_DATE:"YYYY/MM/DD",FILE_NAME_DATE:"YYYYMMDD"},vt=["日","月","火","水","木","金","土"],sn={DEFAULT_ASPECT_RATIO:1.35,HEIGHT:"auto",LOCALE:"ja",INITIAL_VIEW:"dayGridMonth"},pt="設定祝日",on=["12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"],rn=[{value:"30",text:"1ヶ月"},{value:"60",text:"2ヶ月"},{value:"90",text:"3ヶ月"},{value:"120",text:"4ヶ月"},{value:"150",text:"5ヶ月"},{value:"180",text:"6ヶ月"}],b={INIT_FAILED:"アプリケーションの初期化に失敗しました",CALENDAR_IS_NOT_INITIALIZED_YET:"カレンダーがまだ初期化されていません",JSON_ROWS_MISMATCH:"CSVファイルの行数が一致しません",UNKNOWN_CSV_FORMAT:"不明な形式のCSVです",NO_BASE_DATE:"URLパラメータに基準日が含まれていません",BASEDATE_CONFIGURATION_ERROR:"基準日設定失敗",INVALID_BASE_DATE:"無効な基準日です",INVALID_STARTNUMBER:"無効なコマ位置です",INVALID_URL_PARAM:"無効なURLパラメータです",PARAM_OUT_OF_RANGE:"パラメータが有効範囲外です",CONFIG_NOT_LOADED:"設定が完全に読み込まれていません",CONFIG_LOAD_ERROR:"設定の取得に失敗しました",EVENT_CONFIG_ERROR:"イベント設定が読み込まれていないか無効です",SCHEDULE_DATA_ERROR:"スケジュールデータの読み込みに失敗しました",HOLIDAYS_LOAD_ERROR:"祝日データの取得に失敗しました",ICS_EXPORT_ERROR:"ICSファイルのエクスポート中にエラーが発生しました",NO_PARTICIPANTS:"参加者を1人以上選択してください",GOAHEAD:"行ってらっしゃいませ"};var yt=Be();const M=V(yt);var K={exports:{}},Dt=K.exports,he;function gt(){return he||(he=1,function(e,r){(function(u,v){e.exports=v()})(Dt,function(){var u="minute",v=/[+-]\d\d(?::?\d\d)?/g,l=/([+-]|\d\d)/g;return function(d,i,D){var c=i.prototype;D.utc=function(t){var a={date:t,utc:!0,args:arguments};return new i(a)},c.utc=function(t){var a=D(this.toDate(),{locale:this.$L,utc:!0});return t?a.add(this.utcOffset(),u):a},c.local=function(){return D(this.toDate(),{locale:this.$L,utc:!1})};var m=c.parse;c.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),m.call(this,t)};var A=c.init;c.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else A.call(this)};var h=c.utcOffset;c.utcOffset=function(t,a){var f=this.$utils().u;if(f(t))return this.$u?0:f(this.$offset)?h.call(this):this.$offset;if(typeof t=="string"&&(t=function(T){T===void 0&&(T="");var I=T.match(v);if(!I)return null;var x=(""+I[0]).match(l)||["-",0,0],C=x[0],P=60*+x[1]+ +x[2];return P===0?0:C==="+"?P:-P}(t),t===null))return this;var p=Math.abs(t)<=16?60*t:t,y=this;if(a)return y.$offset=p,y.$u=t===0,y;if(t!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(y=this.local().add(p+S,u)).$offset=p,y.$x.$localOffset=S}else y=this.utc();return y};var o=c.format;c.format=function(t){var a=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return o.call(this,a)},c.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var s=c.toDate;c.toDate=function(t){return t==="s"&&this.$offset?D(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():s.call(this)};var n=c.diff;c.diff=function(t,a,f){if(t&&this.$u===t.$u)return n.call(this,t,a,f);var p=this.local(),y=D(t).local();return n.call(p,y,a,f)}}})}(K)),K.exports}var St=gt();const Et=V(St);var W={exports:{}},_t=W.exports,ve;function At(){return ve||(ve=1,function(e,r){(function(u,v){e.exports=v()})(_t,function(){var u={year:0,month:1,day:2,hour:3,minute:4,second:5},v={};return function(l,d,i){var D,c=function(o,s,n){n===void 0&&(n={});var t=new Date(o),a=function(f,p){p===void 0&&(p={});var y=p.timeZoneName||"short",S=f+"|"+y,T=v[S];return T||(T=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:f,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:y}),v[S]=T),T}(s,n);return a.formatToParts(t)},m=function(o,s){for(var n=c(o,s),t=[],a=0;a<n.length;a+=1){var f=n[a],p=f.type,y=f.value,S=u[p];S>=0&&(t[S]=parseInt(y,10))}var T=t[3],I=T===24?0:T,x=t[0]+"-"+t[1]+"-"+t[2]+" "+I+":"+t[4]+":"+t[5]+":000",C=+o;return(i.utc(x).valueOf()-(C-=C%1e3))/6e4},A=d.prototype;A.tz=function(o,s){o===void 0&&(o=D);var n,t=this.utcOffset(),a=this.toDate(),f=a.toLocaleString("en-US",{timeZone:o}),p=Math.round((a-new Date(f))/1e3/60),y=15*-Math.round(a.getTimezoneOffset()/15)-p;if(!Number(y))n=this.utcOffset(0,s);else if(n=i(f,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(y,!0),s){var S=n.utcOffset();n=n.add(t-S,"minute")}return n.$x.$timezone=o,n},A.offsetName=function(o){var s=this.$x.$timezone||i.tz.guess(),n=c(this.valueOf(),s,{timeZoneName:o}).find(function(t){return t.type.toLowerCase()==="timezonename"});return n&&n.value};var h=A.startOf;A.startOf=function(o,s){if(!this.$x||!this.$x.$timezone)return h.call(this,o,s);var n=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return h.call(n,o,s).tz(this.$x.$timezone,!0)},i.tz=function(o,s,n){var t=n&&s,a=n||s||D,f=m(+i(),a);if(typeof o!="string")return i(o).tz(a);var p=function(I,x,C){var P=I-60*x*1e3,B=m(P,C);if(x===B)return[P,x];var H=m(P-=60*(B-x)*1e3,C);return B===H?[P,B]:[I-60*Math.min(B,H)*1e3,Math.max(B,H)]}(i.utc(o,t).valueOf(),f,a),y=p[0],S=p[1],T=i(y).utcOffset(S);return T.$x.$timezone=a,T},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(o){D=o}}})}(W)),W.exports}var Ot=At();const Tt=V(Ot);var Z={exports:{}},It=Z.exports,pe;function xt(){return pe||(pe=1,function(e,r){(function(u,v){e.exports=v()})(It,function(){return function(u,v){v.prototype.isSameOrBefore=function(l,d){return this.isSame(l,d)||this.isBefore(l,d)}}})}(Z)),Z.exports}var Ct=xt();const Rt=V(Ct);var J={exports:{}},$t=J.exports,ye;function Lt(){return ye||(ye=1,function(e,r){(function(u,v){e.exports=v()})($t,function(){return function(u,v){v.prototype.isSameOrAfter=function(l,d){return this.isSame(l,d)||this.isAfter(l,d)}}})}(J)),J.exports}var bt=Lt();const Pt=V(bt);M.extend(Et);M.extend(Tt);M.extend(Rt);M.extend(Pt);M.tz.setDefault("Asia/Tokyo");function g(e){return M.isDayjs(e)?e:M(e)}function se(e,r){return g(e).format(r)}function w(e){return se(e,ae.ISO_DATE)}function Q(e){return se(e,ae.DISPLAY_DATE)}function un(e){return se(e,ae.FILE_NAME_DATE)}function ln(e){return vt[g(e).day()]}function Nt(e,r){return g(e).isSame(g(r),"day")}function Ae(e,r){return g(e).isBefore(g(r),"day")}function cn(e,r){return g(e).isAfter(g(r),"day")}function wt(e,r){return g(e).isSameOrAfter(g(r),"day")}function dn(e,r,u="day"){return g(e).isSame(g(r),u)}function Bt(){return M().startOf("day")}function te(e,r){return g(e).add(r,"day")}function fn(e,r){return g(e).add(r,"month")}function mn(e){return g(e).startOf("day")}function Ht(e){return g(e).day()}function kt(e){return Ht(e)===0}function De(e){return g(e).toDate()}function ge(e){return g(e).unix()}function Se(e){if(!e)return;const[r,u="00"]=e.split(":");return M().hour(parseInt(r,10)).minute(parseInt(u,10)).second(0)}function oe(){const e=mt(),r=_(()=>e.allHolidays),u=_(()=>e.holidayYearsRange),v=_(()=>e.userDefinedHolidays);function l(h){const o=g(h),s=w(o);return r.value[s]!==void 0||kt(o)}function d(h){const o=g(h),s=w(o);return r.value[s]}function i(h){e.setHolidayYearsRange(h)}function D(h){e.setUserDefinedHolidays(h)}function c(h,o,s,n){o.forEach(t=>{let[a,f]=t.split("-");for(let p=s-n;p<=s+n;p++){let y=`${p}-${a}-${f}`;h[y]===void 0&&(h[y]=pt)}})}function m(h,o){const s=g().year(),n={};for(let t=s-h;t<=s+h;t++)ft.getHolidaysOf(t).forEach(f=>{const p=g(`${t}-${String(f.month).padStart(2,"0")}-${String(f.date).padStart(2,"0")}`),y=w(p);n[y]=f.name});return o&&o.length>0&&c(n,o,s,h),n}function A(){try{const h=m(u.value,v.value);return e.setHolidays(h),h}catch(h){throw console.error(b.HOLIDAYS_LOAD_ERROR,h),h}}return{allHolidays:r,holidayYearsRange:u,userDefinedHolidays:v,isHolidaysLoaded:_(()=>Object.keys(r.value).length>0),isHoliday:l,getHolidayName:d,setHolidayYearsRange:i,setUserDefinedHolidays:D,addUserDefinedHolidays:c,fetchHolidays:m,loadHolidays:A}}function re(){const e=ct(),{isHoliday:r}=oe(),u=_(()=>e.scheduleData),v=_(()=>e.defaultBaseDate),l=_(()=>e.activeBaseDate),d=_(()=>e.nextBaseDate);function i(s,n,t){const a=g(s),f=g(t),p=a.diff(f,"day"),y=n-1,S=u.value.rotationCycleLength;return((y+p)%S+S)%S}function D(s,n,t){const a=g(s),f=t?g(t):l.value,p=r(a),y=a.day()===6,S=w(a),T=w(f),I=w(d.value);if(ge(f)!==ge(d.value)&&S>=I||S<T)return{};const x=i(a,n,f);let C;if(p?C=u.value.holiday[x]:y?C=u.value.saturday[x]:C=u.value.weekday[x],!C)return;const[P,B,H]=C.split(",");return{dateStr:S,subject:P,startTime:B,endTime:H,isHoliday:p,isSaturday:y,shiftIndex:x}}function c(s,n,t,a){const f=[];let p=g(s);const y=g(n);for(;Ae(p,y);){const S=D(p,t,a);S&&f.push({date:p,...S}),p=te(p,1)}return f}function m(s,n,t){try{const a=s.length;if(a!==n.length||a!==t.length)throw new Error(b.JSON_ROWS_MISMATCH);const f={holiday:s,saturday:n,weekday:t,rotationCycleLength:a};return e.setScheduleData(f),f}catch(a){throw console.error(b.SCHEDULE_DATA_ERROR,a),a}}function A(s){e.setDefaultBaseDate(s)}function h(s){e.updateActiveBaseDate(g(s))}function o(s){e.setNextBaseDate(g(s))}return{scheduleData:u,defaultBaseDate:v,activeBaseDate:l,nextBaseDate:d,isDataLoaded:_(()=>u.value.rotationCycleLength>0),rotationCycleLength:_(()=>u.value.rotationCycleLength),calculateShiftIndex:i,getScheduleForDate:D,calculateScheduleRange:c,loadScheduleData:m,setDefaultBaseDate:A,updateActiveBaseDate:h,setNextBaseDate:o}}function Oe(){const e=lt(),{getScheduleForDate:r}=re(),{getHolidayName:u}=oe(),v=_(()=>e.calendarEvents),l=_(()=>e.startPosition),d=_(()=>e.eventConfig),i=_(()=>e.icsExportConfig);function D(t){e.setStartPosition(t)}function c(t){e.setExportMonths(t)}function m(t){e.setCalendarEvents(t)}function A(t){e.setICSExportConfig(t)}function h(t){e.setEventConfig(t)}function o(t){var f;const a=d.value;if(!a||!a.events)return{type:"default",config:((f=a==null?void 0:a.events)==null?void 0:f.default)||{}};for(const[p,y]of Object.entries(a.events))if(p!=="default"&&y.keywords&&y.keywords.some(S=>t==null?void 0:t.includes(S)))return{type:p,config:y};return{type:"default",config:a.events.default}}function s(t,a){if(!t)return!1;const{subject:f,endTime:p}=t,y=d.value;if(y&&y.events){const I=y.events.restDay;if(I&&I.keywords&&I.keywords.some(x=>f===x))return!0}if(!p)return!1;const S=Se(p),T=Se(a);return S.isBefore(T)}function n(t,a){const f=[],p=l.value;let y=g(t);const S=g(a);for(;Ae(y,S);){const T=r(y,p);if(!T){y=te(y,1);continue}const{dateStr:I,subject:x,startTime:C,endTime:P,isHoliday:B,isSaturday:H,shiftIndex:E}=T,{config:O}=o(x);f.push({title:O.showTime?`${x}
${C} - 
${P}`:x,start:I,color:O.color,extendedProps:{startTime:C,endTime:P,isShift:!0,isHoliday:B,isSaturday:H,shiftIndex:E,holidayName:u(y)}}),y=te(y,1)}return m(f),f}return{calendarEvents:v,startPosition:l,eventConfig:d,icsExportConfig:i,isConfigLoaded:_(()=>d.value!==void 0),setStartPosition:D,setExportMonths:c,setCalendarEvents:m,setICSExportConfig:A,setEventConfig:h,getEventType:o,canAttendMeetup:s,generateCalendarEvents:n}}function Ut(){const e=$(!1),{setEventConfig:r,setICSExportConfig:u}=Oe(),{loadScheduleData:v,setDefaultBaseDate:l,setNextBaseDate:d}=re(),{setHolidayYearsRange:i,setUserDefinedHolidays:D,loadHolidays:c}=oe();async function m(A){const{holidayData:h,saturdayData:o,weekdayData:s,config:n,eventConfig:t}=A;try{i(ht.DEFAULT_HOLIDAY_YEARS),D(n.custom_holidays||[]),c(),r(t),u(n.info);const a=v(h,o,s),f=g(n.default_base_date);if(l(f),n.next_base_date){const p=g(n.next_base_date);d(p)}else d(f);return e.value=!0,{scheduleData:a,defaultBaseDate:f}}catch(a){return console.error(b.INIT_FAILED,a),!1}}return{isLoaded:e,initializeApp:m}}function Mt(){const e=["baseDate","startNumber","participants","startTime","period"];function r(){window.history.replaceState({},"",window.location.pathname)}function u(){const o=new URL(window.location);Array.from(o.searchParams.keys()).filter(t=>!e.includes(t)).length>0&&r()}function v(){const o=new URL(window.location);if(!(o.searchParams.toString().length>0))return;const n=o.searchParams.get("baseDate");if(!n){alert(b.NO_BASE_DATE),r();return}g(n).isValid()||(alert(b.NO_BASE_DATE),r())}u(),v();function l(o){const s=new URL(window.location);Object.entries(o).forEach(([n,t])=>{t!==void 0?s.searchParams.set(n,t):s.searchParams.delete(n)}),window.history.replaceState({},"",s)}function d(o,s=void 0){const n=new URLSearchParams(window.location.search);return n.has(o)?n.get(o):s}function i(o,s,n=[]){const t=d(o);if(!t)return s;const a=g(t);return a.isValid()?n.length>0&&!n.some(p=>Nt(p,a))?(alert(b.INVALID_BASE_DATE),r(),s):a:(console.error(`${b.INVALID_URL_PARAM}: ${o}`),r(),s)}function D(o,s,n=void 0,t=void 0){const a=d(o);if(!a)return s;const f=parseInt(a,10);return isNaN(f)?(console.error(`${b.INVALID_URL_PARAM}: ${o}`),r(),s):n!==void 0&&f<n||t!==void 0&&f>t?(console.error(b.PARAM_OUT_OF_RANGE),r(),s):f}function c(o,s){return d(o,s)}function m(){const o=d("participants","");if(!o)return[{position:""}];const s=o.split(",").map(n=>parseInt(n,10)).filter(n=>!isNaN(n));return s.length>0?s.map(n=>({position:n})):[{position:""}]}function A(o,s){l({baseDate:w(o),startNumber:s})}function h(o,s,n={}){const t=s.filter(a=>a.position).map(a=>a.position).join(",");l({baseDate:w(o),participants:t,...n})}return{getDateParam:i,getNumberParam:D,getStringParam:c,getParticipantsFromParams:m,updateCalendarParams:A,updateMeetupParams:h}}const Yt=["公休,,","法休,,","104,13:46,20:30","空,,","T113/114,07:39,22:04","132,14:36,23:24","814,12:19,22:26","公休,,","法休,,","空,,","T501/502,06:25,20:36","143,07:51,20:30","空,,","黄121,05:23,12:41","法休,,","131,05:43,15:40","T805/806,05:44,19:41","空,,","139,05:59,20:03","空,,","135,05:52,15:02","公休,,","法休,,","空,,","711,06:34,19:01","空,,","空,,","123,05:32,14:10","法休,,","空,,","空,,","空,,","126,13:36,22:44","134,15:16,23:20","P予備,13:00,21:55","公休,,","法休,,","812,11:49,22:15","T807/808,08:19,21:55","141,07:33,19:54","空,,","黄133,05:46,13:25","法休,,","129,05:41,19:32","815,05:33,19:26","空,,","空,,","513,05:39,13:44","公休,,","法休,,","T503/504,07:13,21:08","空,,","1105,06:42,14:54","821,07:19,19:11","803,07:34,13:56","法休,,","804,13:04,21:25","105/106,07:26,21:27","128,14:01,23:02","516,13:48,23:08","130,14:26,22:31","124,13:06,22:16","公休,,","法休,,","3011,08:56,18:14","521,08:25,17:24","823,07:52,18:26","空,,","黄125,05:33,12:31","法休,,","517,06:07,15:00","1101,05:31,13:09","T703/704,09:18,22:13","空,,","空,,","101,06:08,12:17","公休,,","法休,,","102,12:24,19:32","T111/112,06:59,20:51","空,,","147,08:49,17:40","515,05:53,13:56","法休,,","817,05:48,18:41","801/802,06:34,20:49","空,,","空,,","713,08:33,15:16","公休,,","法休,,","519,06:42,20:44","145,08:14,17:42","空,,","空,,","黄813,05:29,12:56","法休,,","107/108,06:51,21:03","空,,","1106,14:37,20:37","空,,","空,,","512,12:48,22:46","公休,,","法休,,","514,13:00,22:29","122,12:06,23:04","空,,","825,08:34,19:56","137,05:54,14:47","法休,,","空,,","1103,05:46,19:44","T109/110,06:02,20:20","空,,","127,05:40,19:24","A予備,05:10,14:05","公休,,","法休,,","701/702,06:22,19:46","空,,","空,,","819,05:59,16:56","黄511,05:26,13:10","法休,,","811,05:18,18:56","空,,","空,,","空,,","103,06:12,14:21"],Ft=["公休,,","法休,,","104,13:46,20:30","空,,","T113/114,07:39,22:04","132,14:36,23:24","814,12:19,22:26","公休,,","法休,,","空,,","T501/502,06:25,20:36","143,07:51,20:30","空,,","黄121,05:23,12:41","法休,,","131,05:43,15:40","T805/806,05:44,19:41","空,,","139,05:59,20:03","空,,","135,05:52,15:02","公休,,","法休,,","空,,","711,06:34,19:01","空,,","空,,","123,05:32,14:10","法休,,","空,,","空,,","空,,","126,13:36,22:44","134,15:16,23:20","P予備,13:00,21:55","公休,,","法休,,","812,11:49,22:15","T807/808,08:19,21:55","141,07:33,19:54","空,,","黄133,05:46,13:25","法休,,","129,05:41,19:32","815,05:33,19:26","空,,","空,,","513,05:39,13:44","公休,,","法休,,","T503/504,07:13,21:08","空,,","1105,06:42,14:54","821,07:19,19:11","803,07:34,13:56","法休,,","804,13:04,21:25","105/106,07:26,21:27","128,14:01,23:02","516,13:48,23:08","130,14:26,22:31","124,13:06,22:16","公休,,","法休,,","3011,08:56,18:14","521,08:25,17:24","823,07:52,18:26","空,,","黄125,05:33,12:31","法休,,","517,06:07,15:00","1101,05:31,13:09","T703/704,09:18,22:13","空,,","1513,08:30,17:11","101,06:08,12:17","公休,,","法休,,","102,12:24,19:32","T111/112,06:59,20:51","空,,","147,08:49,17:40","515,05:53,13:56","法休,,","817,05:48,18:41","801/802,06:34,20:49","空,,","空,,","713,08:33,15:16","公休,,","法休,,","519,06:42,20:44","145,08:14,17:42","空,,","空,,","黄813,05:29,12:56","法休,,","107/108,06:51,21:03","空,,","1106,14:37,20:37","空,,","空,,","512,12:48,22:46","公休,,","法休,,","514,13:00,22:29","122,12:06,23:04","空,,","825,08:34,19:56","137,05:54,14:47","法休,,","空,,","1103,05:46,19:44","T109/110,06:02,20:20","空,,","127,05:40,19:24","A予備,05:10,14:05","公休,,","法休,,","701/702,06:22,19:46","空,,","空,,","819,05:59,16:56","黄511,05:26,13:10","法休,,","811,05:18,18:56","空,,","空,,","1511,06:11,19:46","103,06:12,14:21"],Vt=["公休,,","法休,,","804,12:09,20:15","819,06:44,21:11","T809/810,07:39,22:04","134,17:26,24:42","816,15:24,22:50","公休,,","法休,,","827,09:09,19:31","T501/502,06:25,20:35","145,06:34,20:43","空,,","黄815,05:36,11:46","法休,,","811,05:06,13:31","101/102,05:18,18:46","空,,","133,05:51,20:01","空,,","105,06:05,12:46","公休,,","法休,,","106,12:56,20:26","715,06:09,19:26","T113/114,05:35,18:34","空,,","141,06:13,12:36","法休,,","523,06:00,14:02","空,,","空,,","128,15:32,22:58","132,16:20,24:11","P予備,13:00,21:55","公休,,","法休,,","512,11:48,21:49","T119/120,07:55,21:20","823,07:34,20:34","空,,","黄135,05:58,12:13","法休,,","517,05:35,19:11","813,05:22,18:56","空,,","空,,","511,05:11,12:44","公休,,","法休,,","T807/808,05:42,20:06","空,,","1105,06:42,14:54","817,06:19,19:32","711,05:22,12:46","法休,,","821,07:19,19:41","T117/118,07:47,21:57","712,14:03,23:25","516,14:59,23:29","122,14:31,24:22","812,12:54,22:39","公休,,","法休,,","825,08:37,22:26","717,08:18,21:01","1106,14:37,20:37","525,06:10,17:53","黄121,05:07,11:13","法休,,","131,05:49,13:06","1101,05:31,13:09","T701/702,07:28,21:13","149,08:22,22:33","1513,08:30,17:11","103,05:48,12:06","公休,,","法休,,","104,11:41,20:04","T115/116,06:48,21:10","529,06:55,20:54","151,10:06,18:42","513,05:20,12:22","法休,,","519,05:48,18:20","109/110,06:23,20:13","147,07:16,20:52","527,06:25,20:30","107,06:24,12:58","公休,,","法休,,","143,06:27,20:33","108,12:34,20:38","139,06:10,20:38","空,,","黄129,05:37,11:28","法休,,","111/112,07:26,21:42","空,,","514,13:54,23:43","126,15:31,23:06","518,15:04,24:56","814,14:39,22:57","公休,,","法休,,","124,15:11,23:03","130,15:50,23:43","空,,","153,10:51,19:36","713,05:37,12:01","法休,,","127,05:29,12:26","1103,05:46,19:44","801/802,05:19,19:11","空,,","137,05:59,16:56","A予備,05:10,14:05","公休,,","法休,,","T805/806,06:33,20:09","空,,","125,05:28,18:27","123,05:23,19:03","黄515,05:25,11:20","法休,,","521,05:49,18:34","空,,","空,,","1511,06:11,19:46","803,06:18,13:01"],zt={restDay:{keywords:["公休","法休"],color:"red",showTime:!1},empty:{keywords:["空"],color:"dodgerblue",showTime:!1},special:{keywords:["黄"],color:"orange",showTime:!0},default:{keywords:[],color:"royalblue",showTime:!0}},jt={events:zt},qt="2025-01-16",Gt="2025-05-16",Kt=["08-13","08-14","08-15","12-28","12-29","12-30","12-31","01-02","01-03"],Wt={calendar_name:"KobanCalendar",timezone:"Asia/Tokyo",company:"bn-k1",product:"kobancalendar",language:"JP",uid_domain:"kobancalendar.jp"},Zt={default_base_date:qt,next_base_date:Gt,custom_holidays:Kt,info:Wt},Jt={key:0,class:"horizontal-fields"},Xt={__name:"HomeView",setup(e){const r=de(()=>ee(()=>import("./CalendarView-CrPC0x4_.js"),__vite__mapDeps([0,1,2,3,4]))),u=de(()=>ee(()=>import("./ExportSection-CWjmp8XD.js"),__vite__mapDeps([5,2,3]))),{getDateParam:v,getNumberParam:l,updateCalendarParams:d}=Mt(),{isLoaded:i,initializeApp:D}=Ut(),c=$(void 0),m=$(""),{calendarEvents:A,startPosition:h,generateCalendarEvents:o,setStartPosition:s}=Oe(),{defaultBaseDate:n,activeBaseDate:t,nextBaseDate:a,rotationCycleLength:f,updateActiveBaseDate:p}=re(),y=_(()=>{const E=[];return n.value&&E.push({value:w(n.value),text:Q(n.value)}),a.value&&!(n.value&&w(n.value)===w(a.value))&&E.push({value:w(a.value),text:Q(a.value)}),E}),S=_(()=>Array.from({length:f.value},(E,O)=>({value:O+1,text:String(O+1)}))),T=_(()=>{if(!t.value)return;const E=Bt();return wt(t.value,E)?De(t.value):De(E)}),I=$(void 0);function x(E){const O=g(E);p(O),d(O,I.value)}function C(E){const O=parseInt(E,10);I.value=O,s(O),d(m.value,O)}function P({start:E,end:O}){o(E,O)}function B({success:E,error:O}){!E&&O&&alert(b.ICS_EXPORT_ERROR)}async function H(){try{const E=await D({holidayData:Yt,saturdayData:Ft,weekdayData:Vt,config:Zt,eventConfig:jt});if(!E){alert(b.INIT_FAILED);return}const O=[n.value,a.value].filter(Boolean),Y=v("baseDate",void 0,O),ue=l("startNumber",void 0,1,E.scheduleData.rotationCycleLength);let z;if(Y)z=Y,p(z);else if(n.value)z=n.value,p(z);else return console.error(b.NO_BASE_DATE),!1;return m.value=w(z),!Y||!ue?(s(void 0),!0):(s(ue),!0)}catch(E){return console.error(b.INIT_FAILED,E),alert(b.INIT_FAILED),!1}}return ce(t,E=>{E&&(m.value=w(E))}),ce(h,E=>{E&&E!==I.value&&(I.value=E)}),Ee(async()=>{await H()}),(E,O)=>(R(),G(nt,{layout:"calendar"},{controls:j(()=>[k(i)&&m.value?(R(),N("div",Jt,[X(me,{id:"baseDate",legend:"基準日","aria-label":"基準日を選択",modelValue:m.value,"onUpdate:modelValue":O[0]||(O[0]=Y=>m.value=Y),options:y.value,formatter:k(Q),onChange:x},null,8,["modelValue","options","formatter"]),X(me,{id:"startNumber",legend:"基準日のコマ位置","aria-label":"コマ位置を選択",modelValue:I.value,"onUpdate:modelValue":O[1]||(O[1]=Y=>I.value=Y),options:S.value,onChange:C},null,8,["modelValue","options"])])):F("",!0)]),calendar:j(()=>[(R(),G($e,null,{fallback:j(()=>O[2]||(O[2]=[L("div",{class:"loading-placeholder"},"Loading...",-1)])),default:j(()=>[X(k(r),{ref_key:"calendarRef",ref:c,"initial-date":T.value,"start-position":I.value,events:k(A),onDatesSet:P},null,8,["initial-date","start-position","events"])]),_:1}))]),export:j(()=>[k(i)&&k(t)?(R(),G(k(u),{key:0,"base-date":k(t),"next-base-date":k(a),"start-position":I.value,onExportComplete:B},null,8,["base-date","next-base-date","start-position"])):F("",!0)]),_:1}))}},Qt=_e(Xt,[["__scopeId","data-v-7c852be3"]]),en=[{path:"/",name:"home",component:Qt,meta:{title:"KobanCalendar🚨"}},{path:"/meetup",name:"meetup",component:()=>ee(()=>import("./MeetupView-LOqQscXC.js"),__vite__mapDeps([6,2,3,7])),meta:{title:"NominiIkundar🍻"}}],Te=Le({history:be("/kobancalendar/"),routes:en});Te.beforeEach((e,r,u)=>{document.title=e.meta.title||"KobanCalendar",u()});const ie=Pe(Ue),tn=Ne();ie.use(tn);ie.use(Te);ie.mount("#app");export{ht as A,dn as B,sn as C,fn as D,b as E,ln as F,rn as P,on as T,_e as _,Oe as a,te as b,g as c,Ut as d,Mt as e,Q as f,w as g,nt as h,Ae as i,jt as j,Zt as k,Yt as l,Bt as m,cn as n,me as o,ee as p,oe as q,Nt as r,Ft as s,ge as t,re as u,De as v,Vt as w,un as x,lt as y,mn as z};
