import{c as xe,i as R,E as Ae,p as He,a as _e,b as Ne,d as Ve,g as Oe,e as _,I as B,f as le,h as Ue,j as re,k as ae,t as Ye,l as ie,m as me,n as H,o as fe,q as Ee,r as $,s as G,u as Xe,v as he,w as Se,x as ee,y as ke,z as We,A as qe,B as De,C as Fe,D as $e,F as Ge,G as ze,H as Be,J as Ke,K as Qe,L as Te,M as oe,W as Ze,N as Je,O as et,S as tt,P as it,Q as st,R as nt,T as lt,U as rt}from"./calendar-_be2FNZ6.js";import{_ as ye,u as at,p as we,c as P,f as ot,q as dt,r as ct,s as ht,g as ue,C as k,v as ut,l as gt}from"./index-BG0m11Ho.js";import{b as C,e as A,w as be,f as O,o as U,g as y,t as W,l as ge,C as q,D as vt,F as pt,q as mt,E as te,n as ft,G as Et,k as St,i as ve,v as Dt}from"./vendor-NbmeMrvb.js";import"./utils-BuJoAw0M.js";oe.touchMouseIgnoreWait=500;let se=0,z=0,ne=!1;class Ce{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&Tt(t)&&this.tryStart(t)){let i=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let i=this.createEventFromMouse(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let i=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let s=t.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let i=this.createEventFromTouch(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=t=>{if(this.isDragging){let i=t.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,yt()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let i=window.scrollX-this.prevScrollX+this.prevPageX,s=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:i-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=e,this.emitter=new Se,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),wt()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),bt()}tryStart(e){let t=this.querySubjectEl(e),i=e.target;return t&&(!this.handleSelector||_(i,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){ne=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?_(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return se||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(ne=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let i=0,s=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,s=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:s}}createEventFromTouch(e,t){let i=e.touches,s,a,n=0,l=0;return i&&i.length?(s=i[0].pageX,a=i[0].pageY):(s=e.pageX,a=e.pageY),t?(this.origPageX=s,this.origPageY=a):(n=s-this.origPageX,l=a-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:a,deltaX:n,deltaY:l}}}function Tt(c){return c.button===0&&!c.ctrlKey}function yt(){se+=1,setTimeout(()=>{se-=1},oe.touchMouseIgnoreWait)}function wt(){z+=1,z===1&&window.addEventListener("touchmove",Me,{passive:!1})}function bt(){z-=1,z||window.removeEventListener("touchmove",Me,{passive:!1})}function Me(c){ne&&c.preventDefault()}class Ct{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=i-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let i=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,t){let i=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();i.style.transition="top "+t+"ms,left "+t+"ms",ee(i,{left:s.left,top:s.top}),ke(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(We(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&ee(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),ee(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class Re extends tt{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class je extends Re{constructor(e,t){super(new Je(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return et(this.scrollController.el)}}class Mt extends Re{constructor(e){super(new Ze,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const pe=typeof performance=="function"?performance.now:Date.now;class Rt{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=pe();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let i=e-window.scrollX,s=t-window.scrollY,a=this.pointerScreenY===null?0:s-this.pointerScreenY,n=this.pointerScreenX===null?0:i-this.pointerScreenX;a<0?this.everMovedUp=!0:a>0&&(this.everMovedDown=!0),n<0?this.everMovedLeft=!0:n>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(pe()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:i}=e,{edgeThreshold:s}=this,a=s-e.distance,n=a*a/(s*s)*this.maxVelocity*t,l=1;switch(e.name){case"left":l=-1;case"right":i.setScrollLeft(i.getScrollLeft()+n*l);break;case"top":l=-1;case"bottom":i.setScrollTop(i.getScrollTop()+n*l);break}}computeBestEdge(e,t){let{edgeThreshold:i}=this,s=null,a=this.scrollCaches||[];for(let n of a){let l=n.clientRect,r=e-l.left,o=l.right-e,u=t-l.top,d=l.bottom-t;r>=0&&o>=0&&u>=0&&d>=0&&(u<=i&&this.everMovedUp&&n.canScrollUp()&&(!s||s.distance>u)&&(s={scrollCache:n,name:"top",distance:u}),d<=i&&this.everMovedDown&&n.canScrollDown()&&(!s||s.distance>d)&&(s={scrollCache:n,name:"bottom",distance:d}),r<=i&&this.everMovedLeft&&n.canScrollLeft()&&(!s||s.distance>r)&&(s={scrollCache:n,name:"left",distance:r}),o<=i&&this.everMovedRight&&n.canScrollRight()&&(!s||s.distance>o)&&(s={scrollCache:n,name:"right",distance:o}))}return s}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new Mt(!1):new je(t,!1))}queryScrollEls(e){let t=[];for(let i of this.scrollQuery)typeof i=="object"?t.push(i):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return t}}class Y extends Ae{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,He(document.body),_e(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let a=this.minDistance,n,{deltaX:l,deltaY:r}=s;n=l*l+r*r,n>=a*a&&this.handleDistanceSurpassed(s)}this.isDragging&&(s.origEvent.type!=="scroll"&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,Ne(document.body),Ve(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new Ce(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),t&&(i.selector=t),this.mirror=new Ct,this.autoScroller=new Rt}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class jt{constructor(e){this.el=e,this.origRect=De(e),this.scrollCaches=st(e).map(t=>new je(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let i={left:e,top:t};for(let s of this.scrollCaches)if(!It(s.getEventTarget())&&!nt(i,s.clientRect))return!1;return!0}}function It(c){let e=c.tagName;return e==="HTML"||e==="BODY"}class K{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):s.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Se}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},i=t,s=e.subjectEl,a;s instanceof HTMLElement&&(a=De(s),i=Fe(i,a));let n=this.initialHit=this.queryHitForOffset(i.left,i.top);if(n){if(this.useSubjectCenter&&a){let l=$e(a,n.rect);l&&(i=Ge(l))}this.coordAdjust=ze(i,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!Q(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=Be(this.droppableStore,e=>(e.component.prepareHits(),new jt(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:i,offsetTrackers:s}=this,a=null;for(let n in i){let l=i[n].component,r=s[n];if(r&&r.isWithinClipping(e,t)){let o=r.computeLeft(),u=r.computeTop(),d=e-o,h=t-u,{origRect:m}=r,w=m.right-m.left,E=m.bottom-m.top;if(d>=0&&d<w&&h>=0&&h<E){let f=l.queryHit(d,h,w,E);f&&Ke(f.dateProfile.activeRange,f.dateSpan.range)&&(this.disablePointCheck||r.el.contains(r.el.getRootNode().elementFromPoint(d+o-window.scrollX,h+u-window.scrollY)))&&(!a||f.layer>a.layer)&&(f.componentId=n,f.context=l.context,f.rect.left+=o,f.rect.right+=o,f.rect.top+=u,f.rect.bottom+=u,a=f)}}}return a}}function Q(c,e){return!c&&!e?!0:!!c!=!!e?!1:qe(c.dateSpan,e.dateSpan)}function Ie(c,e){let t={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(t,i(c,e));return Object.assign(t,Pt(c,e.dateEnv)),t}function Pt(c,e){return{date:e.toDate(c.range.start),dateStr:e.formatIso(c.range.start,{omitTime:c.allDay}),allDay:c.allDay}}class Lt extends B{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:s}=this,a=i.origEvent.target;s.setIgnoreMove(!this.component.isValidDateDownEl(a))},this.handleDragEnd=i=>{let{component:s}=this,{pointer:a}=this.dragging;if(!a.wasTouchScroll){let{initialHit:n,finalHit:l}=this.hitDragging;if(n&&l&&Q(n,l)){let{context:r}=s,o=Object.assign(Object.assign({},Ie(n.dateSpan,r)),{dayEl:n.dayEl,jsEvent:i.origEvent,view:r.viewApi||r.calendarApi.view});r.emitter.trigger("dateClick",o)}}},this.dragging=new Y(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new K(this.dragging,le(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class xt extends B{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=n=>{let{component:l,dragging:r}=this,{options:o}=l.context,u=o.selectable&&l.isValidDateDownEl(n.origEvent.target);r.setIgnoreMove(!u),r.delay=n.isTouch?At(l):null},this.handleDragStart=n=>{this.component.context.calendarApi.unselect(n)},this.handleHitUpdate=(n,l)=>{let{context:r}=this.component,o=null,u=!1;if(n){let d=this.hitDragging.initialHit;n.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,n)||(o=Ht(d,n,r.pluginHooks.dateSelectionTransformers)),(!o||!Ue(o,n.dateProfile,r))&&(u=!0,o=null)}o?r.dispatch({type:"SELECT_DATES",selection:o}):l||r.dispatch({type:"UNSELECT_DATES"}),u?ae():re(),l||(this.dragSelection=o)},this.handlePointerUp=n=>{this.dragSelection&&(Ye(this.dragSelection,n,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:i}=t.context,s=this.dragging=new Y(e.el);s.touchScrollAllowed=!1,s.minDistance=i.selectMinDistance||0,s.autoScroller.isEnabled=i.dragScroll;let a=this.hitDragging=new K(this.dragging,le(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function At(c){let{options:e}=c.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function Ht(c,e,t){let i=c.dateSpan,s=e.dateSpan,a=[i.range.start,i.range.end,s.range.start,s.range.end];a.sort(it);let n={};for(let l of t){let r=l(c,e);if(r===!1)return null;r&&Object.assign(n,r)}return n.range={start:a[0],end:a[3]},n.allDay=i.allDay,n}class X extends B{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=n=>{let l=n.origEvent.target,{component:r,dragging:o}=this,{mirror:u}=o,{options:d}=r.context,h=r.context;this.subjectEl=n.subjectEl;let m=this.subjectSeg=ie(n.subjectEl),E=(this.eventRange=m.eventRange).instance.instanceId;this.relevantEvents=me(h.getCurrentData().eventStore,E),o.minDistance=n.isTouch?0:d.eventDragMinDistance,o.delay=n.isTouch&&E!==r.props.eventSelection?Nt(r):null,d.fixedMirrorParent?u.parentNode=d.fixedMirrorParent:u.parentNode=_(l,".fc"),u.revertDuration=d.dragRevertDuration;let f=r.isValidSegDownEl(l)&&!_(l,".fc-event-resizer");o.setIgnoreMove(!f),this.isDragging=f&&n.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=n=>{let l=this.component.context,r=this.eventRange,o=r.instance.instanceId;n.isTouch?o!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:o}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(n),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new H(l,r.def,r.instance),jsEvent:n.origEvent,view:l.viewApi}))},this.handleHitUpdate=(n,l)=>{if(!this.isDragging)return;let r=this.relevantEvents,o=this.hitDragging.initialHit,u=this.component.context,d=null,h=null,m=null,w=!1,E={affectedEvents:r,mutatedEvents:$(),isEvent:!0};if(n){d=n.context;let f=d.options;u===d||f.editable&&f.droppable?(h=_t(o,n,this.eventRange.instance.range.start,d.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(m=fe(r,d.getCurrentData().eventUiBases,h,d),E.mutatedEvents=m,Ee(E,n.dateProfile,d)||(w=!0,h=null,m=null,E.mutatedEvents=$()))):d=null}this.displayDrag(d,E),w?ae():re(),l||(u===d&&Q(o,n)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!n||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=d,this.validMutation=h,this.mutatedRelevantEvents=m)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=n=>{if(this.isDragging){let l=this.component.context,r=l.viewApi,{receivingContext:o,validMutation:u}=this,d=this.eventRange.def,h=this.eventRange.instance,m=new H(l,d,h),w=this.relevantEvents,E=this.mutatedRelevantEvents,{finalHit:f}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:m,jsEvent:n.origEvent,view:r}),u){if(o===l){let b=new H(l,E.defs[d.defId],h?E.instances[h.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:E});let M={oldEvent:m,event:b,relatedEvents:G(E,l,h),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:w})}},j={};for(let L of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(j,L(u,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},M),j),{el:n.subjectEl,delta:u.datesDelta,jsEvent:n.origEvent,view:r})),l.emitter.trigger("eventChange",M)}else if(o){let b={event:m,relatedEvents:G(w,l,h),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:w})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},b),{draggedEl:n.subjectEl,view:r})),l.dispatch({type:"REMOVE_EVENTS",eventStore:w}),l.emitter.trigger("eventRemove",b);let M=E.defs[d.defId],j=E.instances[h.instanceId],L=new H(o,M,j);o.dispatch({type:"MERGE_EVENTS",eventStore:E});let S={event:L,relatedEvents:G(E,o,j),revert(){o.dispatch({type:"REMOVE_EVENTS",eventStore:E})}};o.emitter.trigger("eventAdd",S),n.isTouch&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),o.emitter.trigger("drop",Object.assign(Object.assign({},Ie(f.dateSpan,o)),{draggedEl:n.subjectEl,jsEvent:n.origEvent,view:f.context.viewApi})),o.emitter.trigger("eventReceive",Object.assign(Object.assign({},S),{draggedEl:n.subjectEl,view:f.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:i}=t.context,s=this.dragging=new Y(e.el);s.pointer.selector=X.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=i.dragScroll;let a=this.hitDragging=new K(this.dragging,Xe);a.useSubjectCenter=e.useEventCenter,a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let i=this.component.context,s=this.receivingContext;s&&s!==e&&(s===i?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:$(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}X.SELECTOR=".fc-event-draggable, .fc-event-resizable";function _t(c,e,t,i){let s=c.dateSpan,a=e.dateSpan,n=s.range.start,l=a.range.start,r={};s.allDay!==a.allDay&&(r.allDay=a.allDay,r.hasEnd=e.context.options.allDayMaintainDuration,a.allDay?n=Qe(t):n=t);let o=Te(n,l,c.context.dateEnv,c.componentId===e.componentId?c.largeUnit:null);o.milliseconds&&(r.allDay=!1);let u={datesDelta:o,standardProps:r};for(let d of i)d(u,c,e);return u}function Nt(c){let{options:e}=c.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class Vt extends B{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let{component:n}=this,l=this.querySegEl(a),r=ie(l),o=this.eventRange=r.eventRange;this.dragging.minDistance=n.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(a.origEvent.target)||a.isTouch&&this.component.props.eventSelection!==o.instance.instanceId)},this.handleDragStart=a=>{let{context:n}=this.component,l=this.eventRange;this.relevantEvents=me(n.getCurrentData().eventStore,this.eventRange.instance.instanceId);let r=this.querySegEl(a);this.draggingSegEl=r,this.draggingSeg=ie(r),n.calendarApi.unselect(),n.emitter.trigger("eventResizeStart",{el:r,event:new H(n,l.def,l.instance),jsEvent:a.origEvent,view:n.viewApi})},this.handleHitUpdate=(a,n,l)=>{let{context:r}=this.component,o=this.relevantEvents,u=this.hitDragging.initialHit,d=this.eventRange.instance,h=null,m=null,w=!1,E={affectedEvents:o,mutatedEvents:$(),isEvent:!0};a&&(a.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,a)||(h=Ot(u,a,l.subjectEl.classList.contains("fc-event-resizer-start"),d.range))),h&&(m=fe(o,r.getCurrentData().eventUiBases,h,r),E.mutatedEvents=m,Ee(E,a.dateProfile,r)||(w=!0,h=null,m=null,E.mutatedEvents=null)),m?r.dispatch({type:"SET_EVENT_RESIZE",state:E}):r.dispatch({type:"UNSET_EVENT_RESIZE"}),w?ae():re(),n||(h&&Q(u,a)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=m)},this.handleDragEnd=a=>{let{context:n}=this.component,l=this.eventRange.def,r=this.eventRange.instance,o=new H(n,l,r),u=this.relevantEvents,d=this.mutatedRelevantEvents;if(n.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:o,jsEvent:a.origEvent,view:n.viewApi}),this.validMutation){let h=new H(n,d.defs[l.defId],r?d.instances[r.instanceId]:null);n.dispatch({type:"MERGE_EVENTS",eventStore:d});let m={oldEvent:o,event:h,relatedEvents:G(d,n,r),revert(){n.dispatch({type:"MERGE_EVENTS",eventStore:u})}};n.emitter.trigger("eventResize",Object.assign(Object.assign({},m),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||he(0),endDelta:this.validMutation.endDelta||he(0),jsEvent:a.origEvent,view:n.viewApi})),n.emitter.trigger("eventChange",m)}else n.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,i=this.dragging=new Y(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=t.context.options.dragScroll;let s=this.hitDragging=new K(this.dragging,le(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return _(e.subjectEl,".fc-event")}}function Ot(c,e,t,i){let s=c.context.dateEnv,a=c.dateSpan.range.start,n=e.dateSpan.range.start,l=Te(a,n,s,c.largeUnit);if(t){if(s.add(i.start,l)<i.end)return{startDelta:l}}else if(s.add(i.end,l)>i.start)return{endDelta:l};return null}class Ut{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let s=this.context.options.unselectCancel,a=Oe(i.origEvent);this.matchesCancel=!!_(a,s),this.matchesEvent=!!_(a,X.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:s}=this,{documentPointer:a}=this,n=s.getCurrentData();if(!a.wasTouchScroll){if(n.dateSelection&&!this.isRecentPointerDateSelect){let l=s.options.unselectAuto;l&&(!l||!this.matchesCancel)&&s.calendarApi.unselect(i)}n.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new Ce(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const Yt={fixedMirrorParent:R},Xt={dateClick:R,eventDragStart:R,eventDragStop:R,eventDrop:R,eventResizeStart:R,eventResizeStop:R,eventResize:R,drop:R,eventReceive:R,eventLeave:R};oe.dataAttrPrefix="";var kt=xe({name:"@fullcalendar/interaction",componentInteractions:[Lt,xt,X,Vt],calendarInteractions:[Ut],elementDraggingImpl:Y,optionRefiners:Yt,listenerRefiners:Xt});const Wt={class:"modal-content edit-modal-content"},qt={class:"modal-title"},Ft={class:"edit-form"},$t={class:"form-group"},Gt=["value"],zt={key:0,class:"form-group time-display"},Bt={class:"time-info"},Kt={class:"time-value"},Qt={class:"time-info"},Zt={class:"time-value"},Jt={key:1,class:"custom-inputs"},ei={class:"form-group"},ti={class:"form-group time-inputs"},ii={class:"form-group time-inputs"},si={class:"modal-actions"},ni=["disabled"],F="__custom__",li={__name:"EditScheduleModal",props:{show:{type:Boolean,default:!1},date:{type:[String,Object],default:null},dayType:{type:String,default:"weekday"},currentSchedule:{type:Object,default:()=>({})}},emits:["close","save"],setup(c,{emit:e}){const t=c,i=e,{scheduleDataSets:s,scheduleUpdateDate:a}=at(),{saveEditedSchedule:n}=we(),l=C(""),r=C(""),o=C(""),u=C(""),d=C(""),h=C(""),m=A(()=>l.value===F),w=A(()=>m.value?u.value.trim()!=="":l.value!==""),E=A(()=>{if(!t.date)return"予定を編集";const S=P(t.date);return`${ot(S)}（${dt(S)}）`}),f=A(()=>{if(!t.date||!s.value)return null;const S=P(t.date);return a.value&&ct(S,a.value)?s.value.next:s.value.default}),b=A(()=>{if(!f.value)return[];let S;switch(t.dayType){case"saturday":S=f.value.saturday||[];break;case"holiday":S=f.value.holiday||[];break;default:S=f.value.weekday||[]}const g=new Map;return S.forEach(p=>{p.s&&!g.has(p.s)&&g.set(p.s,{subject:p.s,startTime:p.sT||"",endTime:p.eT||""})}),Array.from(g.values()).sort((p,N)=>p.subject.localeCompare(N.subject,"ja"))});function M(){if(l.value===F){r.value="",o.value="";return}const S=b.value.find(g=>g.subject===l.value);S?(r.value=S.startTime,o.value=S.endTime):(r.value="",o.value="")}function j(){if(!w.value)return;const S=m.value?{subject:u.value.trim(),startTime:d.value,endTime:h.value}:{subject:l.value,startTime:r.value,endTime:o.value};n(t.date,S),window.location.reload()}function L(S){S.target.id==="editScheduleModal"&&i("close")}return be([()=>t.show,()=>t.date,b],([S])=>{if(S&&t.currentSchedule){const g=t.currentSchedule.subject||"",p=b.value.find(J=>J.subject===g),N=!!p,Z=N&&((t.currentSchedule.startTime||"")!==(p.startTime||"")||(t.currentSchedule.endTime||"")!==(p.endTime||""));g&&(!N||Z)?(l.value=F,u.value=g,d.value=t.currentSchedule.startTime||"",h.value=t.currentSchedule.endTime||"",r.value="",o.value=""):(l.value=g,r.value=(p==null?void 0:p.startTime)||t.currentSchedule.startTime||"",o.value=(p==null?void 0:p.endTime)||t.currentSchedule.endTime||"",u.value="",d.value="",h.value="")}else S||(l.value="",r.value="",o.value="",u.value="",d.value="",h.value="")}),(S,g)=>(U(),O("div",{id:"editScheduleModal",class:ft(["modal",{hidden:!c.show}]),onClick:L},[y("div",Wt,[y("h3",qt,W(E.value),1),y("div",Ft,[y("div",$t,[g[6]||(g[6]=y("label",{for:"editSubject"},"予定名:",-1)),q(y("select",{id:"editSubject","onUpdate:modelValue":g[0]||(g[0]=p=>l.value=p),onChange:M,class:"edit-select"},[g[5]||(g[5]=y("option",{value:"",disabled:""},"予定を選択",-1)),(U(!0),O(pt,null,mt(b.value,p=>(U(),O("option",{key:p.subject,value:p.subject},W(p.subject),9,Gt))),128)),y("option",{value:F},"任意入力")],544),[[vt,l.value]])]),l.value&&!m.value?(U(),O("div",zt,[y("div",Bt,[g[7]||(g[7]=y("span",{class:"time-label"},"開始:",-1)),y("span",Kt,W(r.value||"なし"),1)]),y("div",Qt,[g[8]||(g[8]=y("span",{class:"time-label"},"終了:",-1)),y("span",Zt,W(o.value||"なし"),1)])])):ge("",!0),m.value?(U(),O("div",Jt,[y("div",ei,[g[9]||(g[9]=y("label",{for:"customSubject"},"予定名:",-1)),q(y("input",{id:"customSubject","onUpdate:modelValue":g[1]||(g[1]=p=>u.value=p),type:"text",class:"edit-input",placeholder:"予定名を入力"},null,512),[[te,u.value]])]),y("div",ti,[g[10]||(g[10]=y("label",{for:"customStartTime"},"開始時間:",-1)),q(y("input",{id:"customStartTime","onUpdate:modelValue":g[2]||(g[2]=p=>d.value=p),type:"time",class:"edit-input"},null,512),[[te,d.value]])]),y("div",ii,[g[11]||(g[11]=y("label",{for:"customEndTime"},"終了時間:",-1)),q(y("input",{id:"customEndTime","onUpdate:modelValue":g[3]||(g[3]=p=>h.value=p),type:"time",class:"edit-input"},null,512),[[te,h.value]])])])):ge("",!0),y("div",si,[y("button",{class:"cancel-btn",onClick:g[4]||(g[4]=p=>S.$emit("close"))}," キャンセル "),y("button",{class:"save-btn",onClick:j,disabled:!w.value}," 保存 ",8,ni)])])])],2))}},ri=ye(li,[["__scopeId","data-v-bb948a77"]]),ai={class:"calendar-container"},oi=500,di="#e91e63",ci={__name:"CalendarView",props:{initialDate:{type:[Date,Object]},startPosition:{type:Number,required:!1},events:{type:Array,default:()=>[]}},emits:["datesSet","scheduleEdited"],setup(c,{emit:e}){const t=c,i=e,{isHoliday:s,getHolidayName:a}=ht(),{getEditedSchedule:n,saveEditedSchedule:l,removeEditedSchedule:r,isEditsHidden:o}=we(),u=C(void 0),d=C(void 0),h=C(void 0),m=C(!1),w=C(null),E=C("weekday"),f=C({});let b=null,M=null;const j=A(()=>t.events.map(v=>{if(o.value)return{...v,extendedProps:{...v.extendedProps,isEdited:!1}};const D=ue(v.start),T=n(D);if(T){const x=T.startTime||T.endTime?`${T.subject}
${T.startTime} - 
${T.endTime}`:T.subject;return{...v,title:x,color:di,extendedProps:{...v.extendedProps,isEdited:!0,editedSubject:T.subject,startTime:T.startTime,endTime:T.endTime}}}return{...v,extendedProps:{...v.extendedProps,isEdited:!1}}}));function L(v,D){M={event:v.event,jsEvent:D},b=setTimeout(()=>{M&&g(M.event)},oi)}function S(){b&&(clearTimeout(b),b=null),M=null}function g(v){const D=P(v.start),T=ue(D);let x="weekday";s(D)||D.day()===0?x="holiday":D.day()===6&&(x="saturday");const I=v.extendedProps||{};let V={};I.isEdited?V={subject:I.editedSubject,startTime:I.startTime,endTime:I.endTime}:V={subject:v.title.split(`
`)[0]||"",startTime:I.startTime||"",endTime:I.endTime||""},w.value=T,E.value=x,f.value=V,m.value=!0}function p(){m.value=!1,w.value=null,f.value={}}function N(v){l(v.date,{subject:v.subject,startTime:v.startTime,endTime:v.endTime}),p(),i("scheduleEdited",v)}function Z(v){r(v),p(),i("scheduleEdited",{date:v,removed:!0})}const J=A(()=>({plugins:[lt,kt],initialView:k.INITIAL_VIEW,initialDate:t.initialDate?t.initialDate:void 0,locale:k.LOCALE,events:j.value,aspectRatio:k.DEFAULT_ASPECT_RATIO,height:k.HEIGHT,selectable:!1,editable:!1,dayCellClassNames:v=>{const D=P(v.date),T=[];return s(D)&&T.push("holiday"),D.day()===6&&T.push("fc-day-sat"),D.day()===0&&T.push("fc-day-sun"),ut(D,gt())&&T.push("today-highlight"),T},eventContent:v=>{const{event:D}=v;let[T,x="",I=""]=D.title.split(`
`);const{shiftIndex:V,isEdited:de}=D.extendedProps,Pe=P(D.start),ce=a(Pe),Le=ce?`${V+1} ${ce}`:`${V+1}`;return{html:`
        <div class="event-title">${de?"✎ ":""}${T}</div>
        ${x?`<div class="event-time">${x}</div>`:""}
        ${I?`<div class="event-time">${I}</div>`:""}
        <div class="event-meta">${Le}</div>
      `}},eventDidMount:v=>{const D=v.el;D.addEventListener("mousedown",T=>L(v,T)),D.addEventListener("mouseup",S),D.addEventListener("mouseleave",S),D.addEventListener("touchstart",T=>L(v,T),{passive:!0}),D.addEventListener("touchend",S),D.addEventListener("touchcancel",S),D.classList.add("long-press-enabled")},datesSet:v=>{const D=P(v.start),T=P(v.end);(!d.value||!h.value||!D.isSame(d.value)||!T.isSame(h.value))&&(d.value=D,h.value=T,i("datesSet",{start:D,end:T}))}}));return be([()=>t.startPosition,()=>t.initialDate],()=>{d.value&&h.value&&i("datesSet",{start:d.value,end:h.value})}),Et(()=>{b&&clearTimeout(b)}),St(()=>{setTimeout(()=>{if(u.value){const v=u.value.getApi();d.value=P(v.view.activeStart),h.value=P(v.view.activeEnd),i("datesSet",{start:d.value,end:h.value})}},0)}),(v,D)=>(U(),O("div",ai,[ve(Dt(rt),{ref_key:"calendarRef",ref:u,options:J.value},null,8,["options"]),ve(ri,{show:m.value,date:w.value,"day-type":E.value,"current-schedule":f.value,onClose:p,onSave:N,onRemove:Z},null,8,["show","date","day-type","current-schedule"])]))}},mi=ye(ci,[["__scopeId","data-v-99af4299"]]);export{mi as default};
