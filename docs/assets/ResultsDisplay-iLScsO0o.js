import{_ as g,u as T,g as $,f as C,F as M}from"./index-1zRgIfvf.js";import{f as i,o as n,g as t,t as u,F as k,l as D,C as b,b as m,c as _,j as h,p as v}from"./vendor-CEXAHpd4.js";import"./utils-DW2mDBql.js";const j={class:"modal-content"},S={id:"modalDate"},w={id:"detailsTable",class:"details-table"},x={__name:"DetailsModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},details:{type:Object,default:()=>({details:[]})}},emits:["close"],setup(o,{emit:r}){const d=o,f=r,{getScheduleForDate:y}=T();function p(e){e.target.id==="detailsModal"&&f("close")}function c(e){if(!e||!e.position||!d.details||!d.details.date)return"-";const l=e.schedule;return l&&l.subject?l.endTime?`~${l.endTime}(${l.subject})`:l.subject:"-"}function s(e){if(!e||!e.position||!d.details||!d.details.date)return"-";const l=d.details.date.add(1,"day"),a=y(l,e.position);return a&&a.subject?a.startTime?`${a.startTime}~(${a.subject})`:a.subject:"-"}return(e,l)=>(n(),i("div",{id:"detailsModal",class:b(["modal",{hidden:!o.show}]),onClick:p},[t("div",j,[t("span",{class:"close-modal",onClick:l[0]||(l[0]=a=>e.$emit("close"))},"×"),t("h3",S,u(o.title),1),t("table",w,[l[1]||(l[1]=t("thead",null,[t("tr",null,[t("th",null,"コマ位置"),t("th",null,"当日"),t("th",null,"翌日"),t("th",null,"参加可否")])],-1)),t("tbody",null,[(n(!0),i(k,null,D(o.details.details,a=>(n(),i("tr",{key:a.position},[t("td",null,u(a.position),1),t("td",null,u(c(a)),1),t("td",null,u(s(a)),1),t("td",{class:b(a.isAvailable?"availability-yes":"availability-no")},null,2)]))),128))])])])],2))}},B=g(x,[["__scopeId","data-v-b4b77df6"]]),O={id:"results",class:"results"},F={class:"results-tabs"},N={id:"resultsContent"},A={key:0,class:"no-results-message"},I={key:1,id:"allMatchesTable",class:"results-table"},R=["onClick"],V={key:0,class:"no-results-message"},q={key:1,id:"partialMatchesTable",class:"results-table"},z=["onClick"],E={__name:"ResultsDisplay",props:{results:{type:Object,required:!0,default:()=>({allMatches:[],partialMatches:[]})}},setup(o){const r=m("all"),d=m(!1),f=m({details:[]}),y=m("");function p(c){f.value=c,y.value=`${C(c.date)}（${M(c.date)}）詳細`,d.value=!0}return(c,s)=>(n(),i(k,null,[t("div",O,[s[5]||(s[5]=t("h2",null,"検索結果",-1)),t("div",F,[t("button",{id:"allMatchesTab",class:b(["tab-btn",{active:r.value==="all"}]),onClick:s[0]||(s[0]=e=>r.value="all"),"data-matches":"all"}," 全員一致 ",2),t("button",{id:"partialMatchesTab",class:b(["tab-btn",{active:r.value==="partial"}]),onClick:s[1]||(s[1]=e=>r.value="partial"),"data-matches":"partial"}," 部分一致 ",2)]),t("div",N,[t("div",{id:"allMatchesContent",class:b(["tab-content",{active:r.value==="all"}])},[o.results.allMatches.length===0?(n(),i("div",A," 全員が参加可能な日付は見つかりませんでした。 ")):h("",!0),o.results.allMatches.length>0?(n(),i("table",I,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"日付"),t("th",null,"曜日"),t("th",null,"参加可能人数"),t("th",null,"詳細")])],-1)),t("tbody",null,[(n(!0),i(k,null,D(o.results.allMatches,e=>(n(),i("tr",{key:v($)(e.date)},[t("td",null,u(v(C)(e.date)),1),t("td",null,u(v(M)(e.date)),1),t("td",null,u(e.availableCount)+"/"+u(e.totalCount),1),t("td",null,[t("button",{class:"view-details",onClick:l=>p(e)}," 詳細 ",8,R)])]))),128))])])):h("",!0)],2),t("div",{id:"partialMatchesContent",class:b(["tab-content",{active:r.value==="partial"}])},[o.results.partialMatches.length===0?(n(),i("div",V," 条件に合う日付は見つかりませんでした。 ")):h("",!0),o.results.partialMatches.length>0?(n(),i("table",q,[s[4]||(s[4]=t("thead",null,[t("tr",null,[t("th",null,"日付"),t("th",null,"曜日"),t("th",null,"参加可能人数"),t("th",null,"詳細")])],-1)),t("tbody",null,[(n(!0),i(k,null,D(o.results.partialMatches,e=>(n(),i("tr",{key:v($)(e.date)},[t("td",null,u(v(C)(e.date)),1),t("td",null,u(v(M)(e.date)),1),t("td",null,u(e.availableCount)+"/"+u(e.totalCount),1),t("td",null,[t("button",{class:"view-details",onClick:l=>p(e)}," 詳細 ",8,z)])]))),128))])])):h("",!0)],2)])]),d.value?(n(),_(B,{key:0,show:d.value,title:y.value,details:f.value,onClose:s[2]||(s[2]=e=>d.value=!1)},null,8,["show","title","details"])):h("",!0)],64))}},H=g(E,[["__scopeId","data-v-0834f73e"]]);export{H as default};
